<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Suwasawana - Ministry of Health, Sri Lanka</title>
  <meta name="description" content="Grievance handling system by Ministry Of Health, Sri Lanka">
  <meta name="author" content="Somro BPO">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/SuwaSawana/css/normalize.css">
  <link rel="stylesheet" href="/SuwaSawana/css/skeleton.css">
  <link rel="stylesheet" href="/SuwaSawana/css/custom.css">

  <link rel="icon" type="image/png" href="/SuwaSawana/logo.png">
</head>

<body>
  <div class="table-container">
    <div class="row section-heading">
      <div style="float: left;">
        <img class="u-max-full-width" style="width: 64px; padding: 5px;" src="/SuwaSawana/logo.png" alt="Logo">
      </div>
      <div>
        <h3>Suwasawana - 1907</h3>
        <h4>Ministry of Health</h4>
        <h4>Sri Lanka</h4>
      </div>
    </div>
    <div class="contacontainer">
      <div class="row subheading" style="margin-top: 15px;">
        <h4 class="section-description">Customer Satisfaction</h4>
      </div>
      <form class="personalForm" method="POST">
        <div class="row">
          <div class="personal">
            <div class="heading">
              <h5>Are You Satisfied?</h5>
            </div>

            <div class="row">
              <div class="col-12 select-heading">Select One
              </div>
              <div class="col-12" style="margin: 10px;">
                <label>
                  <input type="radio" class="option-input radio" name="rate" value="5"
                    onclick="$('#comments').hide(250);" required/>
                  Excellent
                </label>
                <label>
                  <input type="radio" class="option-input radio" name="rate" value="4"
                    onclick="$('#comments').hide(250);" />
                  Good
                </label>
                <label>
                  <input type="radio" class="option-input radio" name="rate" value="3"
                    onclick="$('#comments').hide(250);" />
                  Average
                </label>
                <label>
                  <input type="radio" class="option-input radio" name="rate" value="2"
                    onclick="$('#comments').hide(250);" />
                  Poor
                </label>
                <label>
                  <input type="radio" class="option-input radio" name="rate" value="1"
                    onclick="$('#comments').show(250);" />
                  Not Satisfied
                </label>

                <div class="row">
                  <div class="col-12" style="margin-top: 20px;">
                    <textarea class="u-full-width reason" name="comments" maxlength="250" placeholder="Description"
                      id="comments" ></textarea>
                  </div>
                </div>

              </div>

            </div>

            <div class="row">
              <input type="hidden" name="gid" id="gid" value="">
              <input class="button-primary" type="submit" value="Submit">
            </div>
          </div>
      </form>
    </div>
    <img class="img-loading" src="/assets/images/loading.gif">
    <div class=" col 12 success-msg">
        <span class="correct"></span><br/>
        <h4>Thank You !</h4>
        <p>Your feedback has been sent. </p>
    </div>
  </div>
  <div class=" table-block footer-push"></div>

  <footer id="footer">
      <a target="_blank" href="https://www.somrobpo.com/">
        <img src="/assets/images/logo.png" class="logo d-inline-block align-top" alt="" width="100px">
      </a>
  </footer>

</body>
<script src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script>
  let searchParams = new URLSearchParams(window.location.search);
  var gid = searchParams.get('gid');
  $('#gid').val(gid);
  var url = '/api/rate/';

  $(".personalForm").submit(function (e) {
    e.preventDefault();
    $('.personalForm, .subheading').hide(200);
    $('.img-loading').css('display', 'block');

    if($('input[type="radio"][name="rate"]:checked').val() != 1)  {
      $('#comments').val('');
    }
    var form = $(this);
    let formData = form.serialize();

    $.ajax({
      type: "POST",
      url: url,
      data: formData,
      success: function (data) {
        $('.img-loading').hide(100);
        $('.success-msg').show();
      }
    });
  });
</script>

</html>